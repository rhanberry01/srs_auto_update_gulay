"use strict";
/*
 * adonis-ts-boilerplate
 *
 * (c) Harminder Virk <virk@adonisjs.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const sink_1 = require("@adonisjs/sink");
/**
 * Setup prettier inside the project
 */
const task = (_, logger, { absPath, prettier, eslint, pkg }) => {
    if (!eslint || !prettier) {
        return;
    }
    /**
     * Create prettierrc file
     */
    const prettierRc = new sink_1.files.JsonFile(absPath, '.prettierrc');
    prettierRc.set('trailingComma', 'es5');
    prettierRc.set('semi', false);
    prettierRc.set('singleQuote', true);
    prettierRc.set('useTabs', false);
    prettierRc.set('quoteProps', 'consistent');
    prettierRc.set('bracketSpacing', true);
    prettierRc.set('arrowParens', 'always');
    prettierRc.set('printWidth', 100);
    prettierRc.commit();
    /**
     * Create prettier ignore file
     */
    const prettierIgnore = new sink_1.files.NewLineFile(absPath, '.prettierignore');
    prettierIgnore.add('build');
    prettierIgnore.commit();
    /**
     * Setup package.json file
     */
    pkg.install('prettier');
    pkg.install('eslint-config-prettier');
    pkg.install('eslint-plugin-prettier');
    pkg.setScript('format', 'prettier --write .');
    logger.action('create').succeeded('.prettierrc, .prettierignore');
};
exports.default = task;
